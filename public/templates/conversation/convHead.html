<md-content layout="column" layout-padding>
    <div>
        <span class="md-display-1">{{getConversationLabel(conversation.id)}}</span>
        <md-menu>
            <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)">
                <md-icon><i class="material-icons">expand_more</i></md-icon>
            </md-button>
            <md-menu-content>
                <md-menu-item>
                    <md-button ng-click="setClearedForConversationMessages(currentConversations, conversation.id, true)">
                        Clear conversation
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="setClearedForConversationMessages(currentConversations, conversation.id, false)">
                        Show all messages
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="renameConversation($event, conversation.id, conversation.name)">
                        Rename conversation
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="leaveConversation(conversation.id)">
                        Leave conversation
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>
    <div class="md-title">
        <span ng-repeat="userid in conversation.userids">{{getUserFromId(userid).name}} {{$last ? '' : ($index==conversation.userids.length-2) ? ' and ' : ', '}}</span>
        <md-menu>
            <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)">
                <md-icon md-menu-origin><i class="material-icons">add</i></md-icon>
            </md-button>
            <md-menu-content width="3">
                <md-menu-item ng-repeat="user in registeredUsers" ng-if="user.id !== currentUserData.id">
                    <md-button ng-click="addUserToConversation(user.id, conversation.id)">
                        {{user.name}}
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>
</md-content>
